# ============================================
# ğŸ§  DOMAIN ENCUESTA - TUTOR VIRTUAL ZAJUNA
# ============================================
version: "3.1"

intents:
  - iniciar_encuesta
  - problema_resuelto_si
  - encuesta_satis_yes
  - encuesta_satis_no
  - respuesta_satisfecho
  - respuesta_insatisfecho
  - dar_retroalimentacion
  - continuar_consulta
  - terminar_conversacion
  - ir_menu_principal
  - contactar_tutor
  - continuar_tema_si
  - affirm
  - deny

entities:
  - satisfaccion
  - comentario
  - feedback_texto
  - nivel_satisfaccion

slots:
  satisfaccion:
    type: text
    influence_conversation: true
    initial_value: null

  comentario:
    type: text
    influence_conversation: false

  feedback_texto:
    type: text
    influence_conversation: false
    initial_value: null

  nivel_satisfaccion:
    type: text
    influence_conversation: true
  
  encuesta_tipo:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
  usuario:
    type: text
    influence_conversation: false

 
responses:

  # --- Inicio de encuesta ---
  utter_preguntar_satisfaccion:
    - text: "ğŸ“Š Antes de finalizar, Â¿cÃ³mo calificarÃ­as tu experiencia con Zajuna?"
      buttons:
        - title: "ğŸŒŸ Excelente"
          payload: "/respuesta_satisfecho{'nivel_satisfaccion': 'excelente'}"
        - title: "ğŸ™‚ Buena"
          payload: "/respuesta_satisfecho{'nivel_satisfaccion': 'buena'}"
        - title: "ğŸ˜ Regular"
          payload: "/respuesta_insatisfecho{'nivel_satisfaccion': 'regular'}"
        - title: "ğŸ˜ Mala"
          payload: "/respuesta_insatisfecho{'nivel_satisfaccion': 'mala'}"

  # --- Encuesta positiva ---
  utter_agradecer_satisfaccion:
    - text: "Â¡Nos alegra que tu experiencia haya sido positiva! ğŸ’š"
    - text: "Â¿Deseas dejar un comentario adicional o volver al menÃº?"
      buttons:
        - title: "ğŸ—’ï¸ Dejar comentario"
          payload: "/dar_retroalimentacion"
        - title: "ğŸ  Volver al menÃº principal"
          payload: "/ir_menu_principal"

  utter_pedir_retroalimentacion:
    - text: "Por favor, cuÃ©ntanos brevemente quÃ© te gustÃ³ o quÃ© podrÃ­amos mejorar âœï¸"

  utter_gracias_retroalimentacion:
    - text: "ğŸ™ Â¡Gracias por tu comentario! Lo tendremos muy en cuenta."
    - text: "Â¿Deseas continuar con otra consulta o finalizar la conversaciÃ³n?"
      buttons:
        - title: "ğŸ  Volver al menÃº principal"
          payload: "/ir_menu_principal"
        - title: "ğŸ‘‹ Terminar conversaciÃ³n"
          payload: "/terminar_conversacion"

  # --- Encuesta negativa ---
  utter_lamentar_insatisfaccion:
    - text: "Lamentamos que tu experiencia no haya sido la mejor ğŸ˜"
    - text: "Â¿Deseas contactar a tu tutor para asistencia adicional?"
      buttons:
        - title: "âœ‰ï¸ Contactar tutor"
          payload: "/contactar_tutor"
        - title: "ğŸ  Volver al menÃº principal"
          payload: "/ir_menu_principal"

  # --- Continuar o finalizar ---
  utter_ofrecer_continuar:
    - text: "Â¿Deseas realizar otra consulta o volver al menÃº principal?"
      buttons:
        - title: "Volver al menÃº principal"
          payload: "/ir_menu_principal"
        - title: "Finalizar conversaciÃ³n"
          payload: "/terminar_conversacion"

  utter_despedida_final:
    - text: "âœ¨ Gracias por usar el Asistente Virtual Zajuna. Â¡Hasta pronto! ğŸ‘‹"
  
  utter_agradecimiento_encuesta:
    - text: "Â¡Gracias por completar la encuesta!"


  utter_encuesta_insatisfaccion:
    - text: "Gracias por contarnos. Puedo derivarte a un tutor o dejar registro. Â¿QuÃ© prefieres?"
      buttons:
        - title: "Derivar a tutor"
          payload: "/contactar_tutor"
        - title: "Registrar y seguir"
          payload: "/continuar_consulta"

  utter_preguntar_continuar_menu:
    - text: "Â¿Deseas continuar con otro tema o finalizar la conversaciÃ³n?"
  utter_volver_menu:
    - text: "Perfecto, aquÃ­ tienes nuevamente el menÃº principal:"
  utter_cerrar_chat:
    - text: "[Fin de la conversaciÃ³n]"

  utter_ofrecer_soporte:
    - text: "Lamento que no se haya resuelto tu solicitud. ğŸ˜\nÂ¿Deseas que te contacte un asesor humano para ayudarte?"


  utter_encuesta_inicio:
    - text: "Vamos a realizar una breve encuesta de satisfacciÃ³n. Â¡Tu opiniÃ³n es importante!"


  utter_esta_resuelto:
    - text: "Â¿Pudimos resolver tu problema? (SÃ­ / No)"


  utter_encuesta_satisfaccion:
    - text: "Â¿CÃ³mo calificarÃ­as la atenciÃ³n recibida hoy? ğŸ˜Š\nOpciones: satisfecho / neutral / insatisfecho"

  utter_pedir_comentario:
    - text: "Â¿Deseas dejar un comentario adicional sobre tu experiencia?"

  utter_gracias_feedback:
    - text: "Â¡Gracias por compartir tu opiniÃ³n! ğŸ’¬ Valoramos mucho tus comentarios."

  utter_agradecimiento_satisfaccion:
    - text: "Gracias por completar la encuesta ğŸ™ Tu opiniÃ³n nos ayuda a mejorar cada dÃ­a."

  utter_agradecimiento_final:
    - text: "âœ¨ Agradecemos tu tiempo y confianza. Si mÃ¡s adelante necesitas asistencia, estaremos encantados de ayudarte nuevamente. Â¡Hasta pronto!"

actions:
  - action_registrar_encuesta
  - action_guardar_feedback
  - action_ofrecer_continuar_tema
  - action_preguntar_resolucion
  - action_set_encuesta_tipo
  - action_estado_estudiante
  - action_ver_certificados
  - action_ofrecer_continuar_tema   - action_guardar_encuesta
  - validate_encuesta_satisfaccion_form

forms:
  feedback_form:
    required_slots:
      - feedback_texto

  encuesta_satisfaccion_form:
    required_slots:
      - nivel_satisfaccion
      - comentario


imports:
  - domain_general.yml
  - domain_soporte.yml
