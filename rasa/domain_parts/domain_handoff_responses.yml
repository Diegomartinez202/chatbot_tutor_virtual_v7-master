version: "3.1"
responses:

  utter_ofrecer_humano:
    # Fallback universal
    - text: "ğŸ¤ Puedo pasarte con un asesor humano. Â¿Deseas continuar?"
      buttons:
        - title: "SÃ­, conectar"
          payload: "/confirmacion_escalar_humano"
        - title: "No, gracias"
          payload: "/negar_escalar"

    # Variante Socket.IO
    - channel: "socketio"
      text: "Â¿Quieres que te conecte con un asesor humano ahora?"
      buttons:
        - title: "Conectar ahora"
          payload: "/confirmacion_escalar_humano"
        - title: "Seguir aquÃ­"
          payload: "/negar_escalar"

    # Variante Facebook (Quick replies)
    - channel: "facebook"
      custom:
        text: "Â¿Deseas hablar con un asesor humano?"
        quick_replies:
          - content_type: "text"
            title: "SÃ­, conectar"
            payload: "/confirmacion_escalar_humano"
          - content_type: "text"
            title: "No, gracias"
            payload: "/negar_escalar"

  utter_handoff_iniciado:
    - text: "ğŸ§‘â€ğŸ’¼ Derivando tu caso a un asesorâ€¦ MantÃ©n abierto este chat. Te avisarÃ© en cuanto estÃ© listo."

    - channel: "socketio"
      text: "ConectÃ¡ndote con un asesorâ€¦ â³ Por favor, mantÃ©n esta ventana abierta."

    - channel: "facebook"
      custom:
        text: "Derivando a humanoâ€¦ Te avisaremos aquÃ­ cuando el asesor estÃ© listo. â³"
  utter_handoff_en_cola:
    - text: "Te he puesto en cola con un asesor humano. Te notificaremos en breve."
  
  utter_cierre_cancelado:
    - text: "Entendido, no derivarÃ© la conversaciÃ³n. Â¿Deseas hacer algo mÃ¡s?"
      buttons:
        - title: "ğŸ  MenÃº"
          payload: "/ir_menu_principal"
        - title: "ğŸ“ Estado acadÃ©mico"
          payload: "/ver_estado_estudiante"
        - title: "ğŸ“œ Certificados"
          payload: "/consultar_certificados"