# ============================================
# ğŸ“ DOMAIN ACADÃ‰MICO - Tutor Virtual Zajuna
# ============================================
version: "3.1"

# ============================================
# ğŸ“Œ INTENCIONES RELACIONADAS
# ============================================
intents:
  - consultar_academico
  - consultar_certificados
  - consultar_estado_estudiante
  - tutor_asignado
  - confirmar_autenticacion
  - negar_autenticacion
  - volver_menu
  - respuesta_satisfecho
  - respuesta_insatisfecho
  - ir_menu_principal
  - terminar_conversacion
  - estado_estudiante
  - ver_estado_estudiante
  - ver_estado_estudiante_info
  - ver_certificados_info
  - proceso_academico_secundario
  - ver_certificados
  - iniciar_sesion
  - enviar_credenciales
  - deny
  - affirm
  - fallback
  - cerrar_chat


# ============================================
# ğŸ“¦ ENTIDADES Y SLOTS ESPECÃFICOS
# ============================================
entities:
  - curso
  - certificado
  - tutor
  - nombre_usuario
  - tipo_certificado
  - email
  - tipo_estado
slots:
  curso:
    type: text
    influence_conversation: true
    initial_value: null

  certificado:
    type: text
    influence_conversation: false
    initial_value: null

  tutor:
    type: text
    influence_conversation: false
    initial_value: null

  # ğŸ§  Estado de autenticaciÃ³n
  is_authenticated:
    type: bool
    influence_conversation: true
    initial_value: false

  # ğŸ”‘ Token real (para backend)
  auth_token:
    type: text
    influence_conversation: false
    initial_value: null

  encuesta_tipo:
    type: text
    influence_conversation: true

  tipo_certificado:
    type: text
    influence_conversation: true

  nombre_usuario:
    type: text
    influence_conversation: true

  tipo_estado:
    type: text
    influence_conversation: true
# ============================================
# ğŸ’¬ RESPUESTAS ACADÃ‰MICAS
# ============================================
responses:

  # ğŸ”¹ MenÃº principal acadÃ©mico
  utter_menu_academico:
    - text: "ğŸ“š MenÃº acadÃ©mico de Zajuna:"
      buttons:
        - title: "ğŸ“œ Ver certificados"
          payload: "/consultar_certificados"
        - title: "ğŸ§¾ Estado de estudiante"
          payload: "/consultar_estado_estudiante"
        - title: "ğŸ‘¨â€ğŸ« Tutor asignado"
          payload: "/tutor_asignado"
        - title: "â¬…ï¸ Volver al menÃº principal"
          payload: "/volver_menu"

  # ğŸ” Solicitud de autenticaciÃ³n
  utter_necesita_autenticacion:
    - text: "âš ï¸ Para acceder a esta funciÃ³n, primero debes iniciar sesiÃ³n en Zajuna."
      buttons:
        - title: "ğŸ”‘ Iniciar sesiÃ³n"
          payload: "/autenticarse"
        - title: "â¬…ï¸ Volver al menÃº principal"
          payload: "/volver_menu"

  # ğŸ“œ Instrucciones paso a paso para certificados
  utter_pasos_descargar_certificados:
    - text: |
        ğŸ§¾ **CÃ³mo descargar tus certificados:**
        1ï¸âƒ£ Inicia sesiÃ³n en Zajuna: https://zajuna.edu/login  
        2ï¸âƒ£ En tu panel, abre **Certificados**.  
        3ï¸âƒ£ Selecciona el curso y pulsa **Descargar**.  
        4ï¸âƒ£ Si ya estÃ¡s autenticado, puedo mostrarte tus certificados disponibles.
      buttons:
        - title: "âœ… Ya iniciÃ© sesiÃ³n"
          payload: "/confirmar_autenticacion"
        - title: "â¬…ï¸ Volver al menÃº acadÃ©mico"
          payload: "/consultar_academico"

  # ğŸ“Š Instrucciones de estado acadÃ©mico
  utter_estado_estudiante_instrucciones:
    - text: |
        ğŸ“– **Para ver tu estado de estudiante:**
        1ï¸âƒ£ Ingresa a tu cuenta en Zajuna.  
        2ï¸âƒ£ Abre el menÃº **Perfil > Estado acadÃ©mico**.  
        3ï¸âƒ£ VerÃ¡s tu progreso, cursos activos y calificaciones.  
        4ï¸âƒ£ Si ya iniciaste sesiÃ³n, puedo consultarlo directamente.
      buttons:
        - title: "âœ… Ya iniciÃ© sesiÃ³n"
          payload: "/confirmar_autenticacion"
        - title: "â¬…ï¸ Volver al menÃº acadÃ©mico"
          payload: "/consultar_academico"

  # ğŸ‘©â€ğŸ« InformaciÃ³n de tutor asignado
  utter_tutor_info:
    - text: |
        ğŸ‘©â€ğŸ« Tu tutor asignado aparecerÃ¡ en el panel principal de Zajuna, secciÃ³n *Mis cursos*.
        Â¿Deseas que intente consultarlo por ti?
      buttons:
        - title: "SÃ­, consultar tutor"
          payload: "/confirmar_autenticacion"
        - title: "No, volver"
          payload: "/consultar_academico"

  # ğŸ“„ Resultados acadÃ©micos autenticados
  utter_autenticacion_requerida_certificados:
    - text: "ğŸ”’ Necesitas estar autenticado para ver certificados. Por favor, inicia sesiÃ³n primero."

  utter_certificados_listado:
    - text: "ğŸ“ AquÃ­ tienes tus certificados disponibles:\n{certificado}"
      buttons:
        - title: "Volver al menÃº acadÃ©mico"
          payload: "/consultar_academico"
        - title: "Ir al menÃº principal"
          payload: "/ir_menu_principal"

  utter_estado_estudiante_detalle:
    - text: "ğŸ“Š Estado actual del estudiante: {curso}"
      buttons:
        - title: "Volver al menÃº acadÃ©mico"
          payload: "/consultar_academico"
        - title: "Ir al menÃº principal"
          payload: "/ir_menu_principal"

  utter_tutor_detalle:
    - text: "ğŸ‘¨â€ğŸ« Tu tutor asignado es: {tutor}"
      buttons:
        - title: "Volver al menÃº acadÃ©mico"
          payload: "/consultar_academico"
        - title: "Ir al menÃº principal"
          payload: "/ir_menu_principal"

  # ğŸ’¬ Encuesta de satisfacciÃ³n
  utter_preguntar_satisfaccion:
    - text: "Â¿Quedaste satisfecho con la atenciÃ³n recibida?"
      buttons:
        - title: "SÃ­, satisfecho ğŸ˜„"
          payload: "/respuesta_satisfecho"
        - title: "No, insatisfecho ğŸ˜”"
          payload: "/respuesta_insatisfecho"

  utter_agradecimiento_satisfaccion:
    - text: "Â¡Gracias por tu valoraciÃ³n! ğŸ˜Š Me alegra haber podido ayudarte."

  utter_encuesta_insatisfaccion:
    - text: "Lamento que no hayas quedado satisfecho ğŸ˜”. Puedes dejar tu opiniÃ³n o contactar a tu tutor asignado para mayor soporte."

  utter_preguntar_continuar_menu:
    - text: "Â¿Deseas realizar otra consulta?"
      buttons:
        - title: "SÃ­, volver al menÃº principal"
          payload: "/ir_menu_principal"
        - title: "No, terminar conversaciÃ³n"
          payload: "/terminar_conversacion"

  utter_despedida_profesional:
    - text: "ğŸ‘‹ Gracias por usar el asistente Zajuna. Â¡Que tengas un excelente dÃ­a! ğŸŒŸ"
  
  utter_estado_mostrado:
    - text: "AquÃ­ tienes tu estado acadÃ©mico."
  

  utter_pedir_autenticacion:
    - text: "Para consultar tus certificados, necesito que inicies sesiÃ³n. Â¿Deseas iniciar sesiÃ³n ahora?"
    
  utter_certificado_no_autenticado:
    - text: "No has iniciado sesiÃ³n, por favor autentÃ­cate para consultar tus certificados."

  utter_certificado_listado:
    - text: "Estos son tus certificados disponibles: {certificados}."

  utter_confirmacion_consulta:
    - text: "He enviado tus certificados al correo registrado."

  utter_fallback:
    - text: "Lo siento, no entendÃ­ eso. Â¿PodrÃ­as reformularlo?"

  utter_menu_principal:
    - text: "Volvemos al menÃº principal. Â¿QuÃ© deseas hacer ahora?"
  
  utter_estado_estudiante:
    - text: "Tu estado acadÃ©mico actual es: {estado}."

  utter_estado_no_autenticado:
    - text: "No has iniciado sesiÃ³n, no puedo mostrar tu estado. Por favor autentÃ­cate."


# ============================================
# âš™ï¸ ACCIONES PERSONALIZADAS ZAJUNA ACADÃ‰MICAS
# ============================================
actions:
  - zajuna_get_certificados
  - zajuna_get_estado_estudiante
  - zajuna_get_tutor
  - zajuna_check_auth
  - zajuna_menu_principal
  - action_guardar_encuesta
  - action_registrar_feedback
  - action_finalizar_conversacion
  - action_estado_estudiante
  - action_ver_certificados
  - action_listar_certificados
  - action_tutor_asignado
  - action_set_encuesta_tipo
  - action_check_auth
  - action_registrar_encuesta
  - action_guardar_feedback
  - action_ofrecer_continuar_tema
  - action_preguntar_resolucion
  - action_ver_estado_estudiante
 
# ============================================
# ğŸ§± FORMAS DE NAVEGACIÃ“N (no usadas por ahora)
# ============================================
forms:
  login_form:
    required_slots:
      nombre_usuario:
        - type: from_text
      email:
        - type: from_text
    