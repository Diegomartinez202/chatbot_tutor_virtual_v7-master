# ============================================
# ğŸ’¬ DOMAIN DE SOPORTE Y ENCUESTA - Zajuna
# ============================================
version: "3.1"

# ============================================
# ğŸ“Œ INTENCIONES RELACIONADAS
# ============================================
intents:
 
  - describir_problema
  - encuesta_satisfaccion
  - encuesta_satis_yes
  - encuesta_satis_no
  - contactar_tutor
  - enviar_correo_tutor
  - continuar_consulta
  - terminar_conversacion
  - solicitar_soporte
  - soporte_error
  - otro_problema_tecnico
  - enviar_soporte_directo
  - problema_no_ingreso
  - error_actividad
  - escalar_humano
  - confirmacion_escalar_humano
  - negar_escalar
  - enviar_correo
  - respuesta_satisfecho
  - respuesta_insatisfecho
  - ver_link_soporte
  - ver_soporte_creado_info
  - pedir_email
  - pedir_mensaje
  - enviar_telefono


# ============================================
# ğŸ“¦ ENTIDADES Y SLOTS
# ============================================
entities:
  - problema
  - correo_tutor

slots:
  problema:
    type: text
    influence_conversation: true
    initial_value: null

  correo_tutor:
    type: text
    influence_conversation: false
    initial_value: null
  mensaje:
    type: text
    influence_conversation: false
  soporte_form:
    required_slots:
      - nombre
      - email
      - mensaje

# ============================================
# ğŸ’¬ RESPUESTAS DEL BOT
# ============================================
responses:

  utter_menu_soporte:
    - text: "ğŸ› ï¸ MenÃº de soporte Zajuna:"
      buttons:
        - title: "ğŸ“ Reportar un problema"
          payload: "/solicitar_soporte"
        - title: "ğŸ’¬ Contactar a mi tutor"
          payload: "/contactar_tutor"
        - title: "â¬…ï¸ Volver al menÃº principal"
          payload: "/volver_menu"

  utter_solicitar_descripcion:
    - text: "Por favor, cuÃ©ntame brevemente cuÃ¡l es el inconveniente que estÃ¡s experimentando ğŸ‘‡"

  utter_gracias_problema:
    - text: "Gracias por la informaciÃ³n ğŸ™ Nuestro equipo la revisarÃ¡ a la brevedad."
    - text: "En un momento te harÃ© una pequeÃ±a pregunta de satisfacciÃ³n."

  utter_encuesta_satisfaccion:
    - text: "ğŸ™Œ Muchas gracias por tu respuesta. Â¿QuÃ© tan satisfecho estÃ¡s con la atenciÃ³n recibida?"
      buttons:
        - title: "ğŸ‘ Satisfecho"
          payload: "/encuesta_satis_yes"
        - title: "ğŸ‘ Insatisfecho"
          payload: "/encuesta_satis_no"

  utter_gracias_feedback:
    - text: "Â¡Gracias por tu feedback! ğŸ’š Tu opiniÃ³n nos ayuda a mejorar continuamente."

  utter_encuesta_satis_yes:
    - text: |
        Nos alegra que estÃ©s satisfecho ğŸ˜Š  
        Â¿Deseas consultar algo mÃ¡s o terminar la conversaciÃ³n?
      buttons:
        - title: "ğŸ” Consultar otro tema"
          payload: "/continuar_consulta"
        - title: "ğŸ‘‹ Terminar conversaciÃ³n"
          payload: "/terminar_conversacion"

  utter_encuesta_satis_no:
    - text: |
        Lamentamos que tu experiencia no haya sido la mejor ğŸ˜  
        Â¿Deseas contactar a tu tutor para recibir ayuda adicional?
      buttons:
        - title: "âœ‰ï¸ Enviar correo al tutor"
          payload: "/enviar_correo_tutor"
        - title: "â¬…ï¸ Volver al menÃº de soporte"
          payload: "/solicitar_soporte"

  utter_enviar_correo_tutor:
    - text: |
        Por favor confirma tu correo o escribe uno al cual el tutor pueda responder.
        (Ejemplo: nombre@zajuna.edu)
  
  utter_correo_confirmado:
    - text: |
        ğŸ“¬ Â¡Perfecto! Se ha enviado un mensaje a tu tutor asignado.  
        Â¿Deseas continuar con otra consulta o finalizar?
      buttons:
        - title: "ğŸ“š Volver al menÃº principal"
          payload: "/continuar_consulta"
        - title: "ğŸ‘‹ Terminar conversaciÃ³n"
          payload: "/terminar_conversacion"

  utter_continuar_consulta:
    - text: "Perfecto âœ…, regresando al menÃº principal..."
  
  utter_despedida_profesional:
    - text: |
        ğŸ™‹â€â™‚ï¸ Gracias por contactarte con Zajuna Tutor Virtual.  
        Â¡Te deseamos mucho Ã©xito en tu aprendizaje! ğŸŒŸ  
        â€” Equipo Zajuna ğŸ’™
  utter_espera_agente:
    - text: "Te conecto con un agente humano, por favor esperaâ€¦"
  utter_soporte_creado:
    - text: "ğŸ« Tu ticket de soporte fue creado correctamente."
  utter_soporte_error:
    - text: "âš ï¸ No pude registrar el soporte. IntentarÃ© nuevamente en breve."
  utter_ask_nombre:
    - text: "Â¿CuÃ¡l es tu nombre?"
  utter_ask_mensaje:
    - text: "CuÃ©ntame brevemente tu problema o solicitud."

# ============================================
# âš™ï¸ ACCIONES PERSONALIZADAS DE SOPORTE
# ============================================
actions:
  - zajuna_registrar_problema
  - zajuna_enviar_correo_tutor
  - zajuna_menu_principal
  - action_enviar_soporte
  - action_soporte_submit
  - action_submit_soporte
  - action_derivar_y_registrar_humano
  - action_conectar_humano
# ============================================
# ğŸ§± FORMAS (FORMS)
# ============================================
forms:
  soporte_form:
    required_slots:
      - problema

