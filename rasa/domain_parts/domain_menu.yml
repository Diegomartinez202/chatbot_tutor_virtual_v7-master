version: "3.3"

intents:
  - ir_menu_principal
  - iniciar_sesion
  - ver_estado_estudiante
  - consultar_certificados
  - cerrar_chat
  - fallback

entities:
  - menu_seleccion
  - nombre_usuario

slots:
  menu_actual:
    type: text
    influence_conversation: true
    initial_value: "principal"

  is_authenticated:
    type: bool
    influence_conversation: true
    initial_value: false

responses:
  utter_menu_principal:
    - text: "Bienvenido al menú principal. ¿Qué deseas hacer ahora?"
      buttons:
        - title: "Consultar estado del estudiante"
          payload: "/ver_estado_estudiante"
        - title: "Consultar certificados"
          payload: "/consultar_certificados"
        - title: "Iniciar sesión"
          payload: "/iniciar_sesion"
        - title: "Cerrar chat"
          payload: "/cerrar_chat"

  utter_login_requerido:
    - text: "Para acceder a esta opción necesitas iniciar sesión primero. ¿Deseas iniciar sesión ahora?"
      buttons:
        - title: "Sí, iniciar sesión"
          payload: "/iniciar_sesion"
        - title: "No, volver al menú principal"
          payload: "/ir_menu_principal"

  utter_fallback:
    - text: "Lo siento, no entendí eso. Por favor selecciona una opción del menú principal."

actions:
  - action_set_menu_principal
  - action_ver_estado_estudiante
  - action_consultar_certificados
