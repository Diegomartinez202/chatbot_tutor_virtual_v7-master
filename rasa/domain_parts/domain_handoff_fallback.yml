version: "3.1"

slots:
  soporte_intentos:
    type: any
    influence_conversation: false
    initial_value: 0
soporte_intentos:
    type: float
    influence_conversation: false
    initial_value: 0
responses:
  utter_form_entendido_dificultad:
    - text: "Parece que hubo dificultad para completar el formulario. Intentemos de nuevo con una pregunta a la vez."

  utter_form_max_intentos:
    - text: "Veo que ha sido difÃ­cil continuar. Te voy a derivar con un asesor humano para ayudarte mejor."


  # Aviso al usuario cuando falla dentro del form
  utter_form_fallback_warn:
    - text: "No logrÃ© entenderte del todo. Â¿Puedes intentar con otras palabras? (Intento {soporte_intentos}/3)"

  # Lo usamos al escalar tras agotar intentos
  utter_derivando_humano:
    - text: "Veo que hubo dificultades. Te conecto con un asesor humano. â³ Por favor, esperaâ€¦"
  utter_ofrecer_humano:
    - text: "ğŸ¤ Puedo pasarte con un asesor humano. Â¿Deseas continuar?"
      buttons:
        - title: "SÃ­, conectar"
          payload: "/confirmacion_escalar_humano"
        - title: "No, gracias"
          payload: "/negar_escalar"

  utter_handoff_iniciado:
    - text: "ConectÃ¡ndote con un asesorâ€¦ MantÃ©n abierto este chat, te avisarÃ© en cuanto estÃ© listo."

  utter_handoff_en_cola:
    - text: "ğŸ•“ Tu solicitud quedÃ³ en cola. Un asesor te contactarÃ¡ pronto por este mismo chat."

  utter_cierre_cancelado:
    - text: "Perfecto, seguimos por aquÃ­. Â¿En quÃ© mÃ¡s te ayudo?"