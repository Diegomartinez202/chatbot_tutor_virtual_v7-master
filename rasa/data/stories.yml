version: "3.1"

stories:

  # 👋 Saludo → recomendados + carrusel
  - story: Saludo → Recomendados + Carrusel
    steps:
      - intent: saludo
      - action: utter_saludo
      - intent: explorar_temas
      - action: utter_cursos_recomendados
      - action: utter_cursos_carousel

  # 🔎 Explorar directo → Recomendados + Carrusel
  - story: Explorar directo → Recomendados + Carrusel
    steps:
      - intent: explorar_temas
      - action: utter_cursos_recomendados
      - action: utter_cursos_carousel

  # 📚 Proceso académico (flujo básico con auth-check y otros)
  - story: Proceso académico básico
    steps:
      - intent: proceso_academico
      - action: utter_menu_proceso_academico
      - intent: tutor_asignado
      - action: utter_tutor_asignado
      - intent: ver_certificados
      - action: action_check_auth
      - intent: horarios_calendario
      - action: utter_menu_proceso_academico

  # 🙋 Escalar a humano (confirmado)
  - story: Escalar a humano (confirmado)
    steps:
      - intent: escalar_humano
      - action: utter_escalar_humano
      - intent: confirmacion_escalar_humano
      - action: action_conectar_humano
      - action: utter_confirmar_escalado

  # 🙅 Escalar a humano (negado)
  - story: Escalar a humano (negado)
    steps:
      - intent: escalar_humano
      - action: utter_escalar_humano
      - intent: negar_escalar
      - action: utter_gracias_continuar

  # 🛠️ Soporte técnico (arranque del form)
  #    El submit lo maneja la RULE "Submit soporte_form"
  - story: Soporte técnico (arranque form)
    steps:
      - intent: soporte_tecnico
      - action: soporte_form
      - active_loop: soporte_form

  # 🔁 Recuperación de contraseña (form directo)
  #    El submit lo maneja la RULE "Submit recovery_form"
  - story: Recuperar contraseña (form)
    steps:
      - intent: recuperar_contrasena
      - action: recovery_form
      - active_loop: recovery_form

  # 📧 Saludo y envío de correo (acción + utter)
  - story: Saludo → enviar_correo
    steps:
      - intent: saludo
      - action: utter_saludo
      - intent: enviar_correo
      - action: action_enviar_correo
      - action: utter_enviar_correo

  # 📞 Saludo y envío de teléfono
  - story: Saludo → enviar_telefono
    steps:
      - intent: saludo
      - action: utter_saludo
      - intent: enviar_telefono
      - action: utter_enviar_telefono

  # 🪪 Saludo y envío de cédula
  - story: Saludo → enviar_cedula
    steps:
      - intent: saludo
      - action: utter_saludo
      - intent: enviar_cedula
      - action: utter_enviar_cedula

  # 🔗 Saludo y envío de URL
  - story: Saludo → enviar_url
    steps:
      - intent: saludo
      - action: utter_saludo
      - intent: enviar_url
      - action: utter_enviar_url
