version: "3.1"

# =========================================================
# üß© REGLAS DEL DOMINIO DE SOPORTE Y SATISFACCI√ìN - ZAJUNA BOT
# =========================================================
# Controla el flujo de contacto humano, encuesta de satisfacci√≥n,
# retorno al men√∫ o cierre de conversaci√≥n.
# =========================================================

rules:

  - rule: Iniciar formulario de soporte
    steps:
      - intent: solicitar_soporte
      - action: utter_formulario_soporte_intro
      - action: utter_formulario_soporte_campos
      - action: zajuna_guardar_ticket_soporte
      - action: utter_soporte_registrado
      - action: utter_preguntar_satisfaccion

  # --- Flujo de satisfacci√≥n positiva ---
  - rule: Usuario satisfecho
    steps:
      - intent: respuesta_satisfecho
      - action: utter_encuesta_positiva
      - action: utter_preguntar_continuar_menu

  # --- Flujo de satisfacci√≥n negativa ---
  - rule: Usuario insatisfecho ‚Üí ofrecer contacto con tutor
    steps:
      - intent: respuesta_insatisfecho
      - action: utter_encuesta_negativa
      - action: utter_ofrecer_contacto_tutor

  - rule: Enviar correo a tutor
    steps:
      - intent: enviar_correo_tutor
      - action: zajuna_enviar_correo_tutor
      - action: utter_correo_enviado
      - action: utter_preguntar_continuar_menu

  # --- Flujo com√∫n despu√©s de encuesta ---
  - rule: Continuar desde encuesta ‚Üí men√∫ o cierre
    steps:
      - intent: continuar_consulta
      - action: utter_menu_general

  - rule: Terminar conversaci√≥n desde encuesta
    steps:
      - intent: terminar_conversacion
      - action: utter_despedida_profesional

