#rasa\data\stories\stories_conversacion_segura.yml
version: "3.1"

stories:

- story: flujo_cierre_seguro_con_autosave
  steps:
    - intent: terminar_conversacion_segura
    - action: action_confirmar_cierre_seguro
    - checkpoint: espera_confirmacion

- story: confirmar_cierre_seguro
  steps:
    - checkpoint: espera_confirmacion
    - intent: confirmar_cierre
    - action: action_autosave_encuesta
    - action: action_guardar_autosave_mongo
    - action: utter_cierre_confirmado
    - action: action_reset_conversacion_segura

- story: cancelar_cierre_seguro
  steps:
    - checkpoint: espera_confirmacion
    - intent: cancelar_cierre
    - action: utter_cierre_cancelado

- story: reanudar_conversacion_guardada
  steps:
    - intent: reanudar_conversacion
    - action: action_cargar_autosave_mongo
    - action: action_autoresume_conversacion
    - action: utter_reanudar_conversacion

- story: limpiar_autosave_datos
  steps:
    - intent: limpiar_autosave
    - action: action_reset_conversacion_segura
    - action: utter_limpiar_autosave
