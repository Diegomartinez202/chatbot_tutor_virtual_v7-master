# ruta: rasa/domain_parts/domain_academico.yml
version: "3.1"

intents:
  - consultar_academico
  - consultar_certificados
  - ver_certificados_info
  - ver_estado_estudiante
  - ver_estado_estudiante_info
  - horarios_calendario
  - proceso_academico
  - proceso_academico_secundario
  - ir_menu_principal
  - confirmar_autenticacion
  - negar_autenticacion
  - auth_login_cmd
  - ver_login_hint
  - affirm
  - deny
  - nlu_fallback
  - reiniciar_conversacion
  - limpiar_sesion
  - mostrar_token
  - ping_servidor
  - solicitar_soporte
  - necesita_humano
  - iniciar_encuesta
  - enviar_credenciales
  - recuperar_contrasena
  - provide_email
  - estado_estudiante
  - ver_certificados
  - fallback
  - terminar_conversacion
  - confirmar_cierre
  - cancelar_cierre
  - despedida
  - escalar_humano
  - confirmacion_escalar_humano
  - negar_escalar
  - saludo
  - reanudar_auto_si
  - reanudar_auto_no
  - terminar_conversacion_segura
  - reanudar_conversacion
  - limpiar_autosave
  - problema_resuelto_si
  - encuesta_satis_yes
  - encuesta_satis_no
  - respuesta_satisfecho
  - respuesta_insatisfecho
  - dar_retroalimentacion
  - continuar_consulta
  - contactar_tutor
  - continuar_tema_si
  - continue
  - enviar_soporte
  - explorar_temas
  - cambiar_idioma_espanol
  - cambiar_idioma_ingles
  - guardar_snapshot
  - ayuda_guardian
  - confirmar_derivacion
  - negar_derivacion
  - iniciar_sesion
  - cerrar_chat
  - terminar_conversacion_segura_autosave 
  - confirmar_cierre_segura
  - cancelar_cierre_segura
  - guardian_pausar_conversacion
  - guardian_reanudar_conversacion
  - guardian_guardar_progreso
  - notificar_desconexion
  - notificar_inactividad
  - notificar_reconexion
  - guardar_estado_seguridad
  - recuperar_estado_seguridad
  - soporte_tecnico
  - problema_no_ingreso
  - pantalla_blanca
  - error_actividad
  - otro_problema_tecnico
  - enviar_correo_tutor
  - ver_link_soporte
  - ver_soporte_creado_info
  - cancelar
  - negar_cierre
  - confirmar_cierre_autosave
  - cancelar_cierre_autosave
  - certificado_estudio
  - certificado_notas
  - certificado_laboral
  - certificado_otro
  - listar_certificados
  - descargar_certificado
  - ayuda_certificados
  - consulta_por_identificacion
  - consulta_por_solicitud
  - consulta_por_tipo        
  - problema_resuelto_no
  - pedir_mensaje
  - soporte_error
  - enviar_soporte_directo
  - necesita_auth
  - continuar_tema_no 
  - pedir_nombre
  - enviar_numero
  - enviar_correo
  - enviar_url
  - pedir_email
  - soporte_confirmar
  - enviar_telefono
  - enviar_cedula
  - pedir_correo
  - terminar_conversacion      
  - cerrar_chat                    
  - confirmar_cierre              
  - cancelar_cierre                                
  - terminar_conversacion_segura   
 

entities:
  - curso
  - certificado
  - tutor
  - encuesta_tipo
  - nombre
  - tipo_estado
  - email
  - password
  - prefer_contacto
  - motivo_soporte
  - phone   
  - autosave_estado
  - satisfaccion
  - comentario
  - feedback_texto
  - nivel_satisfaccion
  - usuario
  - soporte_mensaje
  - token
  - menu_seleccion
  - nombre_usuario
  - mensaje
  - problema
  - url_problema 
  - tipo_usuario


slots:
  is_authenticated:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
      - type: from_trigger_intent
        value: true
        intent: confirmar_autenticacion
      - type: from_trigger_intent
        value: false
        intent: negar_autenticacion
      - type: from_trigger_intent
        value: false
        intent: deny

  proceso_activo:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
      - type: custom    
  curso:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: curso
      - type: from_text

  certificado:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: certificado
      - type: from_text

  tutor:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: tutor
      - type: from_text

  user_token:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  password:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: auth_login_form
            requested_slot: password

  motivo_soporte:
    type: categorical
    values: ["acceso", "calificaciones", "certificados", "tecnico", "otro"]
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: motivo_soporte
      - type: from_intent
        intent: solicitar_soporte
        value: "otro"
      - type: from_text
        conditions:
          - active_loop: soporte_form
            requested_slot: motivo_soporte

  prefer_contacto:
    type: categorical
    values: ["email", "whatsapp", "ninguno"]
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: prefer_contacto
      - type: from_text
        conditions:
          - active_loop: soporte_form
            requested_slot: prefer_contacto

  phone:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: phone
      - type: from_text
        conditions:
          - active_loop: soporte_form
            requested_slot: phone
 
  derivacion_humano:
    type: bool
    influence_conversation: false
    initial_value: false
    mappings:
      - type: custom

  reanudar_pendiente:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
      - type: custom 
  
  satisfaccion:
    type: text
    influence_conversation: true
    initial_value: null
    mappings:
      - type: from_entity
        entity: satisfaccion
      - type: from_text
  
  feedback_texto:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        conditions:
          - active_loop: feedback_form
            requested_slot: feedback_texto

  encuesta_tipo:
    type: categorical
    values: ["positiva", "negativa", "neutra"]
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: encuesta_tipo
      - type: from_text
        conditions:
          - active_loop: encuesta_satisfaccion_form
            requested_slot: encuesta_tipo
      - type: from_text
  
  nivel_satisfaccion:
    type: categorical
    values: ["1", "2", "3", "4", "5"]
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: nivel_satisfaccion
      - type: from_text
        conditions:
          - active_loop: encuesta_satisfaccion_form
            requested_slot: nivel_satisfaccion

  usuario:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: usuario
      - type: from_text
        conditions:
          - active_loop: feedback_form
            requested_slot: usuario

  comentario:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: encuesta_satisfaccion_form
            requested_slot: comentario

  soporte_mensaje:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: soporte_mensaje
      - type: from_text
        conditions:
          - active_loop: soporte_form
            requested_slot: soporte_mensaje

  auth_token:
    type: text
    influence_conversation: false
    initial_value: null
    mappings:
      - type: from_entity
        entity: token
      - type: from_text
  
  soporte_intentos:
    type: float
    influence_conversation: false
    initial_value: 0
    mappings:
      - type: custom
  
  menu_actual:
    type: text
    influence_conversation: true
    initial_value: "principal"
    mappings:
      - type: custom
  zajuna_base_url:
    type: text
    influence_conversation: false
    initial_value: "https://zajuna.edu"
    mappings:
      - type: custom
  
  encuesta_activa:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
      - type: custom  
 
  autosave_estado:
    type: text
    influence_conversation: false
    mappings:
      - type: custom 
        
  evento_seguridad:
    type: text
    influence_conversation: true
    mappings:
      - type: custom 
  
  nombre:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: nombre
      - type: from_text
        conditions:
          - active_loop: soporte_form
            requested_slot: nombre
  email:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: email
      - type: from_text
        conditions:
          - active_loop: soporte_form
            requested_slot: email
          - active_loop: auth_login_form
            requested_slot: email
          - active_loop: password_recovery_form
            requested_slot: email

  mensaje:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: mensaje
      - type: from_text
        conditions:
          - active_loop: soporte_form
            requested_slot: mensaje
  
  session_activa:
    type: bool
    influence_conversation: true
    initial_value: true
    mappings:
      - type: custom

  confirmacion_cierre:
    type: text
    influence_conversation: true
    initial_value: null
    mappings:
      - type: custom    

  encuesta_incompleta:
    type: bool
    influence_conversation: true
    initial_value: false
    mappings:
      - type: custom
 
  cedula:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: soporte_form
            requested_slot: cedula
  problema:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: problema
      - type: from_text

  url_problema:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: url_problema

  slot_tipo_usuario:
    type: categorical
    values:
      - usuario
      - admin
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: tipo_usuario

forms:
  auth_login_form:
    required_slots:
      - email
      - password

  password_recovery_form:
    required_slots:
      - email

  feedback_form:
    required_slots:
      - feedback_texto
      - usuario

  encuesta_satisfaccion_form:
    required_slots:
      - nivel_satisfaccion
      - comentario
      - encuesta_tipo

  soporte_form:
    required_slots:
      - nombre
      - email
      - cedula
      - motivo_soporte
      - prefer_contacto
      - phone
      - soporte_mensaje
      - mensaje          

responses:
  
  utter_menu_academico:
    - text: "üìö Men√∫ acad√©mico de Zajuna:"
      buttons:
        - title: "üìú Ver certificados"
          payload: "/consultar_certificados"
        - title: "üßæ Estado de estudiante"
          payload: "/ver_estado_estudiante"
        - title: "‚¨ÖÔ∏è Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_certificados_listado:
    - text: "üéì Aqu√≠ tienes tus certificados disponibles:\n{certificado}"
      buttons:
        - title: "Volver al men√∫ acad√©mico"
          payload: "/consultar_academico"
        - title: "Ir al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_estado_estudiante_detalle:
    - text: "üìä Estado actual del estudiante: {curso}"
      buttons:
        - title: "Volver al men√∫ acad√©mico"
          payload: "/consultar_academico"
        - title: "Ir al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_preguntar_continuar_menu:
    - text: "¬øDeseas realizar otra consulta?"
      buttons:
        - title: "S√≠, volver al men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "No, terminar conversaci√≥n"
          payload: "/terminar_conversacion"

  utter_reinicio_confirmado:
    - text: "üßπ La sesi√≥n ha sido reiniciada correctamente."

  utter_ping_ok:
    - text: "‚úÖ El servidor est√° activo y respondiendo correctamente."
  
  utter_saludo:
    - text: "¬°Hola! üëã ¬øEn qu√© puedo ayudarte hoy?"

  utter_need_auth:
    - text: "‚ö†Ô∏è Para realizar esta acci√≥n necesitas iniciar sesi√≥n."
      buttons:
        - title: "Iniciar sesi√≥n"
          payload: "/auth_login_cmd"
        - title: "Cancelar"
          payload: "/deny"

  utter_auth_ok:
    - text: "‚úÖ Autenticaci√≥n correcta. ¬øQu√© deseas consultar?"
      buttons:
        - title: "üéì Estado acad√©mico"
          payload: "/estado_estudiante"
        - title: "üìÑ Certificados"
          payload: "/ver_certificados"
        - title: "üè† Men√∫"
          payload: "/ir_menu_principal"

  utter_auth_fail:
    - text: "‚ö†Ô∏è No pude iniciar sesi√≥n con esos datos. ¬øIntentamos de nuevo o recuperamos tu contrase√±a?"
      buttons:
        - title: "üîÅ Reintentar"
          payload: "/enviar_credenciales"
        - title: "üß∑ Recuperar contrase√±a"
          payload: "/recuperar_contrasena"
        - title: "üë§ Hablar con humano"
          payload: "/necesita_humano"

  utter_ask_password:
    - text: "üîë Escribe tu contrase√±a."
  
  utter_recuperacion_enviada:
    - text: "üìß Te envi√© un correo con instrucciones para restablecer tu contrase√±a. Revisa la bandeja de entrada y spam."
      buttons:
        - title: "üîê Volver a iniciar sesi√≥n"
          payload: "/auth_login_cmd"
        - title: "üè† Men√∫ principal"
          payload: "/ir_menu_principal"

  utter_cierre_confirmado:
    - text: "‚úÖ Conversaci√≥n finalizada. ¬°Gracias por usar el asistente Zajuna! üåü"
      buttons:
        - title: "üîÅ Volver al men√∫"
          payload: "/ir_menu_principal"

  utter_despedida_profesional:
    - text: "üëã Gracias por usar el asistente Zajuna. ¬°Que tengas un excelente d√≠a! üåü"
      buttons:
        - title: "üîÅ Reabrir men√∫"
          payload: "/ir_menu_principal"
        - title: "üîÅ Reanudar m√°s tarde"
          payload: "/terminar_conversacion"

  utter_cerrar_chat:
    - text: "‚úÖ Conversaci√≥n finalizada. Cuando quieras, vuelve a escribirme."

  utter_volver_menu:
    - text: "üìã Este es el men√∫ principal. ¬øQu√© deseas hacer?"
      buttons:
        - title: "üìä Estado acad√©mico"
          payload: "/ver_estado_estudiante"
        - title: "üìÑ Certificados"
          payload: "/consultar_certificados"
        - title: "üõ†Ô∏è Soporte"
          payload: "/solicitar_soporte"

    - text: "¬øQuieres volver al men√∫ principal?"
      buttons:
        - title: "üè† Men√∫ principal"
          payload: "/ir_menu_principal" 

  utter_derivando_humano:
    - text: "Te conecto con un asesor humano. ‚è≥ Por favor, espera un momento."

  utter_reanudar_auto:
    - text: "Parece que tienes una encuesta pendiente. ¬øDeseas retomarla?"
      buttons:
        - title: "S√≠, continuar"
          payload: "/reanudar_auto_si"
        - title: "No, empezar nuevo chat"
          payload: "/reanudar_auto_no"

  utter_reanudar_confirmado:
    - text: "Perfecto, retomamos tu encuesta donde la dejaste. üîÑ"

  utter_reanudar_cancelado:
    - text: "De acuerdo, comenzaremos desde cero. üÜï"

  utter_cierre_cancelado_seguro:
    - text: "Entendido, seguimos donde estabas. üòä"

  utter_reanudar_conversacion:
    - text: "Parece que ten√≠as una encuesta pendiente. ¬øDeseas continuarla?"

  utter_limpiar_autosave:
    - text: "Los datos temporales fueron limpiados correctamente."
 
  utter_preguntar_satisfaccion:
    - text: "üìä Antes de finalizar, ¬øc√≥mo calificar√≠as tu experiencia con Zajuna?"
      buttons:
        - title: "üåü Excelente"
          payload: "/respuesta_satisfecho{'nivel_satisfaccion': 'excelente'}"
        - title: "üôÇ Buena"
          payload: "/respuesta_satisfecho{'nivel_satisfaccion': 'buena'}"
        - title: "üòê Regular"
          payload: "/respuesta_insatisfecho{'nivel_satisfaccion': 'regular'}"
        - title: "üòû Mala"
          payload: "/respuesta_insatisfecho{'nivel_satisfaccion': 'mala'}"
        - title: "üíæ Terminar y guardar progreso"
          payload: "/terminar_conversacion_segura_autosave"

  utter_agradecer_satisfaccion:
    - text: "¬°Nos alegra que tu experiencia haya sido positiva! üíö"
    - text: "¬øDeseas dejar un comentario adicional o volver al men√∫?"
      buttons:
        - title: "üóíÔ∏è Dejar comentario"
          payload: "/dar_retroalimentacion"
        - title: "üè† Volver al men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "üíæ Terminar y guardar progreso"
          payload: "/terminar_conversacion_segura_autosave"

  utter_pedir_retroalimentacion:
    - text: "Por favor, cu√©ntanos brevemente qu√© te gust√≥ o qu√© podr√≠amos mejorar ‚úçÔ∏è"

  utter_gracias_retroalimentacion:
    - text: "üôè ¬°Gracias por tu comentario! Lo tendremos muy en cuenta."
    - text: "¬øDeseas continuar con otra consulta o finalizar la conversaci√≥n?"
      buttons:
        - title: "üè† Volver al men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "üëã Terminar conversaci√≥n"
          payload: "/terminar_conversacion"
        - title: "üíæ Terminar y guardar progreso"
          payload: "/terminar_conversacion_segura_autosave"

  utter_lamentar_insatisfaccion:
    - text: "Lamentamos que tu experiencia no haya sido la mejor üòû"
    - text: "¬øDeseas contactar a tu tutor para asistencia adicional?"
      buttons:
        - title: "‚úâÔ∏è Contactar tutor"
          payload: "/contactar_tutor"
        - title: "üè† Volver al men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "üíæ Terminar y guardar progreso"
          payload: "/terminar_conversacion_segura_autosave"

 
  utter_agradecimiento_satisfaccion:
    - text: "Gracias por completar la encuesta üôè Tu opini√≥n nos ayuda a mejorar cada d√≠a."


  utter_ofrecer_continuar:
    - text: "¬øDeseas realizar otra consulta o volver al men√∫ principal?"
      buttons:
        - title: "üè† Volver al men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "üëã Finalizar conversaci√≥n"
          payload: "/terminar_conversacion"
        - title: "üíæ Terminar y guardar progreso"
          payload: "/terminar_conversacion_segura_autosave"

    - text: "¬øDeseas continuar con este tema o abrir un caso de soporte?"
      buttons:
        - title: "S√≠, continuar"
          payload: "/affirm"
        - title: "No, enviar soporte"
          payload: "/deny"

  utter_esta_resuelto:
    - text: "¬øPudimos resolver tu problema? (S√≠ / No)"

  utter_encuesta_satisfaccion:
    - text: "¬øC√≥mo calificar√≠as la atenci√≥n recibida hoy? üòä\nOpciones: satisfecho / neutral / insatisfecho"

  utter_pedir_comentario:
    - text: "¬øDeseas dejar un comentario adicional sobre tu experiencia?"

  utter_gracias_feedback:
    - text: "¬°Gracias por compartir tu opini√≥n! üí¨ Valoramos mucho tus comentarios."

  utter_agradecimiento_final:
    - text: "‚ú® Agradecemos tu tiempo y confianza. Si m√°s adelante necesitas asistencia, estaremos encantados de ayudarte nuevamente. ¬°Hasta pronto!"
      buttons:
        - title: "üíæ Terminar guardando conversaci√≥n"
          payload: "/terminar_conversacion_segura_autosave"
        - title: "üè† Volver al men√∫"
          payload: "/ir_menu_principal"

  utter_ask_nivel_satisfaccion:
    - text: "‚≠ê Del 1 al 5, ¬øqu√© tan satisfecho est√°s? (1 = muy poco, 5 = muy satisfecho)"

  utter_ask_comentario:
    - text: "üí¨ ¬øQuieres dejar alg√∫n comentario adicional?"
  
  utter_soporte_creado:
    - text: "üé´ Tu solicitud de soporte fue registrada correctamente. Un asesor te contactar√° en breve."

  utter_soporte_error:
    - text: >
        Parece que hubo un problema al procesar tu solicitud de soporte. 
        ¬øQuieres que lo intentemos de nuevo o prefieres que te derive a un agente humano?
  
  utter_saludar:
    - text: "¬°Hola! üëã Soy tu asistente virtual de **Zajuna**. ¬øEn qu√© puedo ayudarte hoy?"
      buttons:
        - title: "üîë Iniciar sesi√≥n"
          payload: "/auth_login_cmd"
        - title: "üéì Consultar √°rea acad√©mica"
          payload: "/consultar_academico"
        - title: "üõ†Ô∏è Soporte t√©cnico"
          payload: "/solicitar_soporte"

  utter_affirm:
    - text: "¬°Perfecto! üëç ¬øDeseas hacer algo m√°s?"

  utter_deny:
    - text: "Entendido. Si necesitas algo m√°s, me dices. üôÇ"

  utter_cambiar_idioma_espanol:
    - text: "Idioma configurado a **Espa√±ol**. ¬øC√≥mo te ayudo ahora?"

  utter_cambiar_idioma_ingles:
    - text: "Language switched to **English**. How can I help you now?"

  utter_catalogo_cursos:
    - text: "Estos son los cursos disponibles (demo). Si buscas algo espec√≠fico, dime el √°rea. üìö"
  
  utter_guardian_help:
    - text: >
        üõ°Ô∏è Este es un comando t√©cnico para guardar un snapshot de tu sesi√≥n.
        Normalmente se usa para pruebas o diagn√≥stico del bot.

  utter_guardian_snapshot_ok:
    - text: "‚úÖ He solicitado guardar un snapshot de tu sesi√≥n actual (modo t√©cnico)."

  utter_ask_motivo_soporte:
    - text: "Cu√©ntame brevemente el motivo de tu solicitud de soporte."

  utter_ask_detalle_soporte:
    - text: "¬øPuedes darme m√°s detalle para ayudar al asesor a contextualizar?"

  utter_ask_email_contacto:
    - text: "¬øCu√°l es tu correo de contacto?"

  utter_handoff_en_cola:
    - text: "üì® Te he puesto en cola con un asesor humano. Te notificaremos en breve."
      buttons:
        - title: "Terminar guardando progreso"
          payload: "/terminar_conversacion_segura_autosave"
        - title: "Volver al men√∫"
          payload: "/ir_menu_principal"

  utter_derivar_humano_en_progreso:
    - text: "Conect√°ndote con un asesor... ‚åõ Por favor espera un momento."

  utter_derivacion_cancelada:
    - text: "Sin problema. Continuamos por aqu√≠. ¬øQu√© deseas hacer?"
      buttons:
        - title: "üè† Men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "üéì Ver estado acad√©mico"
          payload: "/ver_estado_estudiante"
        - title: "üìú Consultar certificados"
          payload: "/consultar_certificados"
        - title: "üíæ Terminar y guardar progreso"
          payload: "/terminar_conversacion_segura_autosave"

  utter_handoff_por_fallos:
    - text: "Veo que hubo varias dificultades. Te conectar√© con un asesor humano para ayudarte mejor."
      buttons:
        - title: "‚úÖ Continuar con derivaci√≥n a humano"
          payload: "/confirmacion_escalar_humano"
        - title: "üíæ Terminar y guardar progreso"
          payload: "/terminar_conversacion_segura_autosave"

  utter_intento_form_fallido:
    - text: "No logr√© entender del todo. ¬øPodr√≠as intentarlo de otra forma?"
      buttons:
        - title: "Intentar de nuevo"
          payload: "/necesita_humano"
        - title: "üíæ Terminar y guardar progreso"
          payload: "/terminar_conversacion_segura_autosave"

  utter_ofrecer_humano:
    - text: "ü§ù Puedo pasarte con un asesor humano. ¬øDeseas continuar?"
      buttons:
        - title: "S√≠, conectar"
          payload: "/confirmacion_escalar_humano"
        - title: "No, gracias"
          payload: "/negar_escalar"
        - title: "Terminar guardando progreso"
          payload: "/terminar_conversacion_segura_autosave"

    - channel: "socketio"
      text: "¬øQuieres que te conecte con un asesor humano ahora?"
      buttons:
        - title: "Conectar ahora"
          payload: "/confirmacion_escalar_humano"
        - title: "Seguir aqu√≠"
          payload: "/negar_escalar"
        - title: "Terminar guardando progreso"
          payload: "/terminar_conversacion_segura_autosave"

    - channel: "facebook"
      custom:
        text: "¬øDeseas hablar con un asesor humano?"
        quick_replies:
          - content_type: "text"
            title: "S√≠, conectar"
            payload: "/confirmacion_escalar_humano"
          - content_type: "text"
            title: "No, gracias"
            payload: "/negar_escalar"
          - content_type: "text"
            title: "Terminar guardando progreso"
            payload: "/terminar_conversacion_segura_autosave"

  utter_handoff_iniciado:
    - text: "üßë‚Äçüíº Derivando tu caso a un asesor‚Ä¶ Mant√©n abierto este chat. Te avisar√© en cuanto est√© listo."
    - channel: "socketio"
      text: "Conect√°ndote con un asesor‚Ä¶ ‚è≥ Por favor, mant√©n esta ventana abierta."
    - channel: "facebook"
      custom:
        text: "Derivando a humano‚Ä¶ Te avisaremos aqu√≠ cuando el asesor est√© listo. ‚è≥"

  utter_cierre_cancelado:
    - text: "üëå Perfecto, seguimos aqu√≠. ¬øEn qu√© m√°s puedo ayudarte?"
      buttons:
        - title: "üè† Men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "üìÑ Ver certificados"
          payload: "/consultar_certificados"
        - title: "üìä Estado acad√©mico"
          payload: "/ver_estado_estudiante"
  utter_form_fallback_warn:
    - text: "No logr√© entenderte del todo. ¬øPuedes intentar con otras palabras? (Intento {soporte_intentos}/3)"
  
  utter_login_requerido:
    - text: "Para acceder a esta opci√≥n necesitas iniciar sesi√≥n en Zajuna. ¬øDeseas iniciar sesi√≥n ahora?"
      buttons:
        - title: "üîë Iniciar sesi√≥n ahora"
          payload: "/auth_login_cmd"
        - title: "üìã Ver gu√≠a de login"
          payload: "/ver_login_hint"
        - title: "‚Ü©Ô∏è Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_menu_principal:
    - text: "¬°Hola! Soy tu asistente Zajuna üëã. Este es el men√∫ principal, ¬øqu√© deseas hacer?"
      buttons:
        - title: "üéì √Årea acad√©mica"
          payload: "/consultar_academico"
        - title: "üìä Ver estado acad√©mico"
          payload: "/ver_estado_estudiante"
        - title: "üìú Consultar certificados"
          payload: "/consultar_certificados"
        - title: "üîê Iniciar sesi√≥n"
          payload: "/auth_login_cmd"
        - title: "üõ†Ô∏è Soporte t√©cnico"
          payload: "/solicitar_soporte"
        - title: "‚ùå Terminar conversaci√≥n"
          payload: "/terminar_conversacion_segura_autosave"

  utter_pedir_autenticacion:
    - text: >
        üîê Para consultar tus certificados o ver tu estado acad√©mico, necesito que inicies sesi√≥n.
        ¬øDeseas iniciar ahora?
      buttons:
        - title: "üîë Iniciar sesi√≥n Zajuna"
          payload: "/auth_login_cmd"
        - title: "‚ùì ¬øC√≥mo me autentico?"
          payload: "/ver_login_hint"
        - title: "‚ùå No, luego"
          payload: "/deny"
        - title: "‚¨ÖÔ∏è Volver al men√∫ principal"
          payload: "/ir_menu_principal"

 
  utter_estado_mostrado:
    - text: "üìä Tu estado acad√©mico actual es: {estado}."
      buttons:
        - title: "üìú Ver certificados"
          payload: "/consultar_certificados"
        - title: "üè† Men√∫ principal"
          payload: "/saludo"

  utter_certificado_listado:
    - text: |
        üìë **Tus certificados**
        {certificados_md}

        ¬øQu√© deseas hacer ahora?
      buttons:
        - title: "‚¨áÔ∏è Descargar certificados"
          payload: "/ver_certificados_info"
        - title: "üè† Men√∫ principal"
          payload: "/saludo"

  utter_confirmacion_consulta:
    - text: "‚úÖ He enviado tus certificados al correo registrado."

  utter_login_hint:
    - text: |
        üîê **C√≥mo iniciar sesi√≥n en Zajuna**
        1) Abre el portal: {zajuna_base_url}/login  
        2) Ingresa tu usuario/correo y contrase√±a.  
        3) Si olvidaste la clave, usa **‚Äú¬øOlvid√© mi contrase√±a?‚Äù**.

        Atajos:
        ‚Ä¢ Inicio de sesi√≥n: {zajuna_base_url}/login  
        ‚Ä¢ Registro: {zajuna_base_url}/register  
        ‚Ä¢ Recuperar contrase√±a: {zajuna_base_url}/password/reset
      buttons:
        - title: "üîë Ir a Iniciar sesi√≥n"
          payload: "/auth_login_cmd"
        - title: "üÜò Recuperar contrase√±a"
          payload: "/recuperar_contrasena"
        - title: "üè† Men√∫"
          payload: "/saludo"

  utter_recuperar_acceso_cta:
    - text: |
        üÜò **Recuperaci√≥n de acceso**
        1) Ve a: {zajuna_base_url}/password/reset  
        2) Ingresa tu correo registrado y confirma.  
        3) Revisa tu bandeja de entrada (y spam).  
        4) Sigue el enlace para crear una nueva contrase√±a.

        ¬øListo para continuar luego?
      buttons:
        - title: "‚úÖ Ya recuper√© mi acceso"
          payload: "/auth_login_cmd"
        - title: "üè† Men√∫"
          payload: "/saludo"

  utter_menu_principal_quick:
    - text: "Elige una opci√≥n para continuar:"
      buttons:
        - title: "üéì Estado acad√©mico"
          payload: "/ver_estado_estudiante"
        - title: "üìú Certificados"
          payload: "/consultar_certificados"
        - title: "üõ†Ô∏è Soporte"
          payload: "/solicitar_soporte"
        - title: "üîê Iniciar sesi√≥n"
          payload: "/auth_login_cmd"
        - title: "‚ùå Terminar"
          payload: "/terminar_conversacion"

    - channel: "socketio"
      text: "üëá Opciones r√°pidas:"
      buttons:
        - title: "üéì Estado"
          payload: "/ver_estado_estudiante"
        - title: "üìú Certificados"
          payload: "/consultar_certificados"
        - title: "üîê Login"
          payload: "/auth_login_cmd"
        - title: "‚ùå Terminar"
          payload: "/terminar_conversacion"

    - channel: "facebook"
      custom:
        text: "Selecciona una opci√≥n:"
        quick_replies:
          - content_type: "text"
            title: "üéì Estado"
            payload: "/ver_estado_estudiante"
          - content_type: "text"
            title: "üìú Certificados"
            payload: "/consultar_certificados"
          - content_type: "text"
            title: "üîê Login"
            payload: "/auth_login_cmd"
          - content_type: "text"
            title: "‚ùå Terminar"
            payload: "/terminar_conversacion"

  utter_certificados_carousel:
    - text: |
        üìú **Tus certificados disponibles**
        1) *Introducci√≥n a Programaci√≥n* ‚Äî 2024-06-10  
           ‚Ä¢ [Ver PDF](https://zajuna.sena.edu.co/cert/123)  
           ‚Ä¢ [Descargar](https://zajuna.sena.edu.co/cert/123/download)

        2) *Bases de Datos* ‚Äî 2025-03-15  
           ‚Ä¢ [Ver PDF](https://zajuna.sena.edu.co/cert/456)  
           ‚Ä¢ [Descargar](https://zajuna.sena.edu.co/cert/456/download)
      buttons:
        - title: "üîê Iniciar sesi√≥n Zajuna"
          payload: "/auth_login_cmd"
        - title: "üè† Men√∫ principal"
          payload: "/ir_menu_principal"

    - channel: "socketio"
      text: |
        üìú Certificados:
        ‚Ä¢ Introducci√≥n a Programaci√≥n (2024-06-10)  
          Ver: https://zajuna.sena.edu.co/cert/123  
          Descargar: https://zajuna.sena.edu.co/cert/123/download

        ‚Ä¢ Bases de Datos (2025-03-15)  
          Ver: https://zajuna.sena.edu.co/cert/456  
          Descargar: https://zajuna.sena.edu.co/cert/456/download
      buttons:
        - title: "üîê Login"
          payload: "/auth_login_cmd"
        - title: "üè† Men√∫"
          payload: "/ir_menu_principal"

    - channel: "facebook"
      custom:
        attachment:
          type: "template"
          payload:
            template_type: "generic"
            elements:
              - title: "Introducci√≥n a Programaci√≥n"
                subtitle: "Emitido: 2024-06-10"
                image_url: "https://tu-cdn/certificados/programacion.png"
                buttons:
                  - type: "web_url"
                    url: "https://zajuna.sena.edu.co/cert/123"
                    title: "Ver PDF"
                  - type: "web_url"
                    url: "https://zajuna.sena.edu.co/cert/123/download"
                    title: "Descargar"
              - title: "Bases de Datos"
                subtitle: "Emitido: 2025-03-15"
                image_url: "https://tu-cdn/certificados/bd.png"
                buttons:
                  - type: "web_url"
                    url: "https://zajuna.sena.edu.co/cert/456"
                    title: "Ver PDF"
                  - type: "web_url"
                    url: "https://zajuna.sena.edu.co/cert/456/download"
                    title: "Descargar"

  utter_login_hint_presentacion:
    - text: |
        üîê Para ver tus datos en tiempo real, inicia sesi√≥n en Zajuna:
        1) üì≤ Abre: https://zajuna.sena.edu.co/login
        2) ‚ñ∂Ô∏è Ingresa tus credenciales
        3) üîÅ Vuelve aqu√≠ (el bot detectar√° tu sesi√≥n)
      buttons:
        - title: "Abrir Zajuna"
          payload: "/auth_login_cmd"
        - title: "¬øOlvid√© mi contrase√±a?"
          payload: "/recuperar_contrasena"

  utter_cierre_confirmado_seguro:
    - text: "‚úÖ Conversaci√≥n finalizada de forma segura y se guardar√° tu progreso actual, ¬°Gracias por usar el asistente Zajuna! üåü"
  
  
  utter_guardando_progreso:
    - text: "üíæ Guardando tu progreso antes de cerrar la conversaci√≥n‚Ä¶"

  utter_notificar_desconexion:
    - text: "‚ö†Ô∏è Se detect√≥ una desconexi√≥n. Guardando tu progreso..."

  utter_notificar_inactividad:
    - text: "üò¥ Has estado inactivo por un tiempo. Guardando el estado actual..."

  utter_notificar_reconexion:
    - text: "üîÑ Bienvenido de nuevo, restaurando tu sesi√≥n previa..."
 
  utter_solicitar_soporte_intro:
    - text: "üõ†Ô∏è Vamos a crear un ticket de soporte. Te har√© 3 preguntas r√°pidas."

  utter_menu_soporte:
    - text: "üõ†Ô∏è Men√∫ de soporte:"
      buttons:
        - title: "üìù Reportar un problema"
          payload: "/solicitar_soporte"
        - title: "‚¨ÖÔ∏è Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_ask_mensaje:
    - text: "Cu√©ntame brevemente tu problema o solicitud."

  utter_soporte_registrado:
    - text: "üé´ Tu ticket de soporte fue creado correctamente."

  utter_encuesta_positiva:
    - text: "¬°Nos alegra que est√©s satisfecho! ‚úÖ"

  utter_encuesta_negativa:
    - text: "Lamentamos que tu experiencia no haya sido la mejor. Podemos contactar a tu tutor para ayudarte."

  utter_ofrecer_contacto_tutor:
    - text: "¬øDeseas contactar a tu tutor?"
      buttons:
        - title: "‚úâÔ∏è Enviar correo al tutor"
          payload: "/enviar_correo_tutor"
        - title: "‚¨ÖÔ∏è Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_correo_enviado:
    - text: "üì¨ Envi√© un mensaje a tu tutor. Te responder√° al correo registrado."
  

  utter_fallback:
    - text: "ü§î No entend√≠ bien lo que dijiste. ¬øQu√© deseas hacer ahora?"
      buttons:
        - title: "üè† Volver al men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "üÜò Hablar con soporte"
          payload: "/solicitar_soporte"
        - title: "‚ùå Salir del chat"
          payload: "/terminar_conversacion"

  utter_confirmar_cierre:
    - text: "¬øEst√°s seguro que deseas finalizar la conversaci√≥n ahora?"
      buttons:
        - title: "‚úÖ S√≠, finalizar"
          payload: "/confirmar_cierre"
        - title: "‚Ü©Ô∏è No, continuar"
          payload: "/cancelar_cierre"

  utter_cancelar_cierre:
    - text: "Perfecto üòä, continuemos. ¬øEn qu√© m√°s puedo ayudarte?"

  utter_confirmar_cierre_seguro:
    - text: >
        Parece que a√∫n tienes un proceso activo: **{proceso_activo}**.  
        ¬øDeseas cerrar la conversaci√≥n de todos modos?
      buttons:
        - title: "S√≠, cerrar de todas formas"
          payload: "/confirmar_cierre_autosave"
        - title: "No, continuar"
          payload: "/cancelar_cierre_autosave"

  utter_confirmar_cierre_con_autosave:
    - text: >
        Detect√© que tienes una **encuesta sin completar**.  
        Puedo guardarla autom√°ticamente antes de cerrar. ¬øQuieres hacerlo?
      buttons:
        - title: "S√≠, guardar y cerrar"
          payload: "/confirmar_cierre_autosave"
        - title: "No, descartar encuesta"
          payload: "/cancelar_cierre_autosave"

  utter_despedida_sin_guardar:
    - text: "La conversaci√≥n se cerr√≥ sin guardar progreso adicional. Puedes volver cuando quieras. üëã"
  
  utter_encuesta_insatisfaccion:
    - text: "Gracias por contarnos. Puedo derivarte a un tutor o dejar registro. ¬øQu√© prefieres?"
      buttons:
        - title: "Derivar a tutor"
          payload: "/contactar_tutor"
        - title: "Registrar y seguir"
          payload: "/continuar_consulta"

  utter_consultar_certificados:
    - text: >
        Claro, te ayudo a consultar tus certificados.  
        Primero dime, ¬øqu√© tipo de certificado necesitas?
      buttons:
        - title: "Certificado de estudio"
          payload: "/certificado_estudio"
        - title: "Certificado de notas"
          payload: "/certificado_notas"
        - title: "Certificado laboral"
          payload: "/certificado_laboral"
        - title: "Otro tipo"
          payload: "/certificado_otro"

    - text: >
        Puedo mostrarte el estado o la forma de descarga de tus certificados.  
        Elige una opci√≥n o escr√≠beme cu√°l necesitas:
      buttons:
        - title: "Ver certificados disponibles"
          payload: "/listar_certificados"
        - title: "Descargar certificado"
          payload: "/descargar_certificado"
        - title: "Ayuda general"
          payload: "/ayuda_certificados"

    - text: >
        Para ayudarte con tus certificados necesito algunos datos.  
        ¬øQuieres consultar por identificaci√≥n, por n√∫mero de solicitud o por tipo de certificado?
      buttons:
        - title: "Por identificaci√≥n"
          payload: "/consulta_por_identificacion"
        - title: "Por solicitud"
          payload: "/consulta_por_solicitud"
        - title: "Por tipo de certificado"
          payload: "/consulta_por_tipo"

  utter_preguntar_cierre:
    - text: "¬øSeguro que quieres terminar la conversaci√≥n? Tienes un proceso activo."

  utter_confirmar_cierre_definitivo:
    - text: "Perfecto, cierro la conversaci√≥n y guardo tu progreso."

  utter_iniciar_soporte_desde_pedir_mensaje:
    - text: >
        Perfecto, te ayudo a enviar un mensaje a soporte. 
        Te har√© unas preguntas r√°pidas para entender mejor tu caso.

  utter_necesita_autenticacion:
    - text: >
        Para continuar con este proceso necesito que est√©s autenticado en la plataforma.
        ¬øQu√© te gustar√≠a hacer?
      buttons:
        - title: "Iniciar sesi√≥n ahora"
          payload: "/auth_login_cmd"
        - title: "Ver c√≥mo iniciar sesi√≥n"
          payload: "/ver_login_hint"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "Cancelar y cerrar chat"
          payload: "/terminar_conversacion"

    - text: >
        Esta opci√≥n requiere que tengas la sesi√≥n iniciada.
        Elige una de las siguientes alternativas:
      buttons:
        - title: "Abrir login"
          payload: "/auth_login_cmd"
        - title: "Necesito ayuda con el login"
          payload: "/ver_login_hint"
        - title: "Ir al men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "No, mejor terminemos"
          payload: "/terminar_conversacion"

  utter_no_continuar_tema:
    - text: >
        Perfecto, dejamos este tema aqu√≠. 
        No te preocupes, tu progreso en la conversaci√≥n se mantiene.

  utter_volver_menu_principal:
    - text: >
        Te regreso al men√∫ principal. ¬øSobre qu√© te gustar√≠a continuar?
      buttons:
        - title: "Procesos acad√©micos"
          payload: "/consultar_academico"
        - title: "Mis certificados"
          payload: "/consultar_certificados"
        - title: "Estado como estudiante"
          payload: "/ver_estado_estudiante"
        - title: "Soporte t√©cnico"
          payload: "/solicitar_soporte"

  utter_despedida_final:
    - text: >
        Gracias por usar el asistente. ¬°Que tengas un excelente d√≠a! üëã
    - text: >
        De acuerdo, cerramos por ahora. 
        Si necesitas algo m√°s, puedes volver a escribirme cuando quieras. üëã

  utter_problema_resuelto_no:
    - text: >
        Lamento que el problema a√∫n no est√© resuelto.  
        Puedo derivarte con un agente humano o seguir intentando resolverlo aqu√≠ en el chat.
        ¬øQu√© prefieres?
      buttons:
        - title: "Hablar con un humano"
          payload: "/escalar_humano"
        - title: "Seguir con el bot"
          payload: "/negar_escalar"   

  utter_derivar_a_humano:
    - text: >
        Perfecto, te derivo con un agente humano.  
        Por favor espera un momento mientras conecto tu caso.

  utter_continuar_con_bot:
    - text: >
        De acuerdo, seguimos intentando aqu√≠ en el chat.  
        Cu√©ntame con m√°s detalle qu√© est√° pasando o qu√© no qued√≥ claro.
  utter_ask_cedula:
    - text: "Por favor, dime tu n√∫mero de documento (c√©dula) para asociar el caso."

  utter_ask_nombre:
    - text: "¬øCu√°l es tu nombre completo?"

  utter_ask_email:
    - text: "¬øCu√°l es tu correo electr√≥nico de contacto?"

  utter_ask_phone:
    - text: "Si quieres, d√©jame un n√∫mero de contacto (celular o tel√©fono)."
  
  utter_ayuda_certificados:
    - text: >
        Puedo ayudarte con tus certificados: ver cu√°les tienes disponibles, 
        explicarte los tipos de certificados y guiarte para descargarlos.
        ¬øQu√© te gustar√≠a hacer?
      buttons:
        - title: "Ver mis certificados"
          payload: "/consultar_certificados"
        - title: "Saber qu√© tipos hay"
          payload: "/ayuda_certificados_detalle"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_cancelar_accion:
    - text: >
        De acuerdo, cancelo la acci√≥n que est√°bamos realizando.
        ¬øQuieres hacer algo m√°s o volver al men√∫ principal?
      buttons:
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "Terminar conversaci√≥n"
          payload: "/terminar_conversacion"

  utter_cerrar_chat_confirmacion:
    - text: >
        ¬øSeguro que quieres cerrar el chat?
      buttons:
        - title: "S√≠, cerrar chat"
          payload: "/terminar_conversacion"
        - title: "No, seguir conversando"
          payload: "/negar_cierre"

  utter_certificado_estudio_info:
    - text: >
        El certificado de estudio acredita que est√°s (o estuviste) matriculado en un programa
        acad√©mico. Normalmente incluye tus datos personales, el programa y el periodo.
        ¬øQuieres que revise si tienes certificados de estudio disponibles?
      buttons:
        - title: "Ver certificados de estudio"
          payload: "/consultar_certificados"
        - title: "Volver al men√∫"
          payload: "/ir_menu_principal"

  utter_certificado_notas_info:
    - text: >
        El certificado de notas muestra tus calificaciones obtenidas en las asignaturas o m√≥dulos.
        Suele usarse para tr√°mites acad√©micos o con otras instituciones.
        ¬øDeseas que te muestre las opciones para descargar tus notas?
      buttons:
        - title: "Ver certificados de notas"
          payload: "/consultar_certificados"
        - title: "Volver al men√∫"
          payload: "/ir_menu_principal"

  utter_certificado_laboral_info:
    - text: >
        El certificado laboral acredita tu vinculaci√≥n con la instituci√≥n o empresa
        (cargo, tiempo de servicio, tipo de contrato, etc.).
        ¬øQuieres que te indique c√≥mo solicitar o descargar tu certificado laboral?
      buttons:
        - title: "Ver certificados laborales"
          payload: "/consultar_certificados"
        - title: "Volver al men√∫"
          payload: "/ir_menu_principal"

  utter_certificado_otro_info:
    - text: >
        Entiendo, se trata de otro tipo de certificado (por ejemplo, asistencia, participaci√≥n
        o alg√∫n formato especial). Puedo orientarte para ver si est√° disponible o c√≥mo solicitarlo.
        Cu√©ntame brevemente qu√© tipo de certificado necesitas.
      buttons:
        - title: "Ver mis certificados"
          payload: "/consultar_certificados"
        - title: "Volver al men√∫"
          payload: "/ir_menu_principal"

  utter_confirmar_derivacion:
    - text: >
        Perfecto, confirmo la derivaci√≥n de tu caso a un agente humano.
        En breve alguien continuar√° atendi√©ndote.
    - text: >
        Listo, he derivado tu caso a soporte humano. 
        Por favor espera un momento mientras se conecta un asesor.

  utter_consulta_por_identificacion_info:
    - text: >
        Perfecto, vamos a consultar tus certificados por identificaci√≥n.  
        Por favor ingresa tu n√∫mero de documento (c√©dula) tal como aparece en la plataforma.
      buttons:
        - title: "No recuerdo mi documento"
          payload: "/ayuda_certificados"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_consulta_por_solicitud_info:
    - text: >
        Vamos a consultar por n√∫mero de solicitud o radicado.  
        Escribe el c√≥digo de solicitud que te enviamos cuando iniciaste el tr√°mite.
      buttons:
        - title: "No tengo el n√∫mero de solicitud"
          payload: "/ayuda_certificados"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_consulta_por_tipo_info:
    - text: >
        De acuerdo, consultemos por tipo de certificado.  
        Dime qu√© tipo de certificado necesitas: estudio, notas, laboral u otro.
      buttons:
        - title: "Certificado de estudio"
          payload: "/certificado_estudio"
        - title: "Certificado de notas"
          payload: "/certificado_notas"
        - title: "Certificado laboral"
          payload: "/certificado_laboral"
        - title: "Otro tipo"
          payload: "/certificado_otro"

  utter_contactar_tutor_opciones:
    - text: >
        Puedo ayudarte a contactar a tu tutor.  
        ¬øC√≥mo prefieres hacerlo?
      buttons:
        - title: "Enviar correo al tutor"
          payload: "/enviar_correo_tutor"
        - title: "Ver correo de mi tutor"
          payload: "/ver_link_soporte"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_contactar_tutor_confirmacion:
    - text: >
        Listo, dej√© registrado que quieres contactar a tu tutor.  
        Te mostrar√© la informaci√≥n necesaria o enviar√© el correo seg√∫n la opci√≥n que elijas.


  utter_continuar_tema_menu:
    - text: >
        Genial, sigamos entonces.  
        ¬øEn qu√© √°rea te gustar√≠a continuar?
      buttons:
        - title: "Men√∫ acad√©mico"
          payload: "/consultar_academico"
        - title: "Mis certificados"
          payload: "/consultar_certificados"
        - title: "Estado como estudiante"
          payload: "/ver_estado_estudiante"
        - title: "Soporte t√©cnico"
          payload: "/solicitar_soporte"


  utter_iniciar_retroalimentacion:
    - text: >
        Me encantar√≠a conocer tu opini√≥n para mejorar.  
        Te har√© un par de preguntas r√°pidas sobre tu experiencia con el asistente.
      buttons:
        - title: "Dar feedback ahora"
          payload: "/iniciar_encuesta"
        - title: "M√°s tarde"
          payload: "/continuar_tema_si"


  utter_ask_feedback_texto:
    - text: >
        Cu√©ntame brevemente c√≥mo fue tu experiencia con el asistente.  
        ¬øQu√© te gust√≥ y qu√© podr√≠amos mejorar?

  utter_ask_usuario:
    - text: >
        Si quieres, dime tu nombre o alg√∫n identificador para asociar tu comentario 
        (puedes omitirlo si prefieres mantenerte an√≥nimo).

  utter_descargar_certificado:
    - text: >
        Claro, puedo ayudarte a descargar tu certificado.  
        ¬øQu√© deseas hacer exactamente?
      buttons:
        - title: "Ver mis certificados disponibles"
          payload: "/consultar_certificados"
        - title: "Descargar certificado espec√≠fico"
          payload: "/consulta_por_tipo"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_error_actividad_ayuda:
    - text: >
        Veo que tienes un error al abrir una actividad o contenido.  
        ¬øPuedes decirme si el problema es con una actividad espec√≠fica, un cuestionario o todo el curso?
      buttons:
        - title: "Solo una actividad"
          payload: "/error_actividad"
        - title: "Todo el curso"
          payload: "/pantalla_blanca"
        - title: "Otro problema"
          payload: "/otro_problema_tecnico"

  utter_horarios_calendario_info:
    - text: >
        Puedo mostrarte informaci√≥n sobre tus horarios y el calendario acad√©mico.  
        Ten en cuenta que para ver detalles exactos normalmente debes entrar a la plataforma.
      buttons:
        - title: "Ver calendario acad√©mico"
          payload: "/consultar_academico"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_redirigir_login:
    - text: >
        Veo que quieres iniciar sesi√≥n.  
        Te llevo al flujo de autenticaci√≥n.
      buttons:
        - title: "Iniciar sesi√≥n"
          payload: "/auth_login_cmd"
        - title: "Ver ayuda para el login"
          payload: "/ver_login_hint"


  utter_listar_certificados:
    - text: >
        Puedo listar los certificados que tienes disponibles en la plataforma.  
        Si ya est√°s autenticado en el portal, revisa la secci√≥n de certificados o historial acad√©mico.
      buttons:
        - title: "Quiero ver certificados"
          payload: "/consultar_certificados"
        - title: "Ayuda con certificados"
          payload: "/ayuda_certificados"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_negar_autenticacion:
    - text: >
        Entiendo, por ahora no iniciar√°s sesi√≥n.  
        Algunas funciones estar√°n limitadas, pero puedo ayudarte con informaci√≥n general.
      buttons:
        - title: "Ver men√∫ principal"
          payload: "/ir_menu_principal"
        - title: "Terminar conversaci√≥n"
          payload: "/terminar_conversacion"

  utter_no_escalar_humano:
    - text: >
        Perfecto, seguimos aqu√≠ en el chat conmigo.  
        ¬øSobre qu√© tema te gustar√≠a seguir trabajando?
      buttons:
        - title: "Men√∫ acad√©mico"
          payload: "/consultar_academico"
        - title: "Mis certificados"
          payload: "/consultar_certificados"
        - title: "Soporte t√©cnico"
          payload: "/solicitar_soporte"

  utter_otro_problema_tecnico:
    - text: >
        Entiendo, es otro tipo de problema t√©cnico.  
        Por favor descr√≠beme brevemente qu√© est√° ocurriendo y con qu√© parte de la plataforma.

  utter_pantalla_blanca_ayuda:
    - text: >
        Si ves una pantalla en blanco, suele estar relacionado con el navegador o la conexi√≥n.  
        Prueba actualizar la p√°gina, borrar cach√© o cambiar de navegador.  
        Si el problema contin√∫a, puedo ayudarte a reportarlo a soporte.
      buttons:
        - title: "Reportar a soporte"
          payload: "/solicitar_soporte"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"
  utter_problema_no_ingreso:
    - text: >
        Veo que no puedes ingresar a la plataforma.  
        Verifica tu usuario y contrase√±a, y si el problema contin√∫a puedo orientarte o derivarte a soporte.
      buttons:
        - title: "Olvid√© mi contrase√±a"
          payload: "/recuperar_contrasena"
        - title: "Necesito soporte t√©cnico"
          payload: "/solicitar_soporte"
        - title: "Ver gu√≠a de inicio de sesi√≥n"
          payload: "/ver_login_hint"
  utter_proceso_academico_menu:
    - text: >
        Vamos a ver tu proceso acad√©mico.  
        ¬øQu√© aspecto te interesa revisar?
      buttons:
        - title: "Estado como estudiante"
          payload: "/ver_estado_estudiante"
        - title: "Certificados"
          payload: "/consultar_certificados"
        - title: "Horarios / calendario"
          payload: "/horarios_calendario"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_proceso_academico_secundario_menu:
    - text: >
        Este es el submen√∫ de procesos acad√©micos.  
        Elige qu√© quieres gestionar:
      buttons:
        - title: "Ver mi estado"
          payload: "/ver_estado_estudiante"
        - title: "Ver certificados"
          payload: "/consultar_certificados"
        - title: "Ver horarios/calendario"
          payload: "/horarios_calendario"

  utter_confirmar_email:
    - text: >
        Gracias, he registrado tu correo electr√≥nico.  
        Lo usar√© solo para ayudarte con esta consulta o soporte.

  utter_soporte_tecnico_menu:
    - text: >
        Veo que necesitas soporte t√©cnico.  
        ¬øQu√© tipo de problema est√°s teniendo?
      buttons:
        - title: "No puedo ingresar"
          payload: "/problema_no_ingreso"
        - title: "Pantalla en blanco"
          payload: "/pantalla_blanca"
        - title: "Error en actividad"
          payload: "/error_actividad"
        - title: "Otro problema t√©cnico"
          payload: "/otro_problema_tecnico"

  utter_ver_certificados_info:
    - text: >
        Aqu√≠ puedes ver informaci√≥n de ejemplo sobre certificados, incluso sin iniciar sesi√≥n.
        Esto incluye formatos, tipos y ejemplos de certificados disponibles.
      buttons:
        - title: "Ver mis certificados reales"
          payload: "/consultar_certificados"
        - title: "Ayuda con certificados"
          payload: "/ayuda_certificados"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_ver_estado_estudiante_info:
    - text: >
        Aqu√≠ puedes ver informaci√≥n general sobre el estado del estudiante: 
        activo, inactivo, en proceso, entre otros.  
        Para ver tu estado real, normalmente debo consultar la plataforma.
      buttons:
        - title: "Ver mi estado acad√©mico"
          payload: "/ver_estado_estudiante"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_ver_link_soporte:
    - text: >
        Puedes contactar soporte a trav√©s del siguiente enlace oficial de ayuda:  
        [Abrir soporte en la plataforma](https://tusitio-de-soporte.com)
      buttons:
        - title: "Abrir soporte"
          payload: "/solicitar_soporte"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_ver_soporte_creado_info:
    - text: >
        Te muestro la informaci√≥n del ticket de soporte que ya fue creado para tu caso.  
        Revisa tu correo o el √°rea de soporte de la plataforma para ver el estado y las respuestas.
      buttons:
        - title: "Ver enlace de soporte"
          payload: "/ver_link_soporte"
        - title: "Volver al men√∫ principal"
          payload: "/ir_menu_principal"

  utter_pedir_derivacion:
    - text: >
        Veo que prefieres atenci√≥n humana. 
        ¬øQuieres que te derive con un asesor ahora mismo?
      buttons:
        - title: "S√≠, con un humano"
          payload: "/confirmacion_escalar_humano"
        - title: "No, seguir contigo"
          payload: "/negar_escalar"

  utter_espera_agente:
    - text: >
        Te estoy conectando con un agente humano. 
        Por favor espera un momento...

  utter_pedir_correo:
    - text: "Por favor, dime tu correo electr√≥nico."
  
  utter_gracias_url:
    - text: "Gracias por el enlace, lo tendr√© en cuenta para revisar el problema."
  
  utter_pedir_confirmacion_soporte:
    - text: >
        Veo que necesitas soporte t√©cnico. ¬øQuieres que cree un ticket con tus datos
        para que un agente te contacte?

  utter_cancelar_soporte:
    - text: >
        Perfecto, no crear√© un ticket de soporte. Si luego lo necesitas, solo dime
        que quieres soporte y lo abrimos.

  utter_token_actual:
    - text: "Tu token actual es: {user_token}"

  utter_token_admin:
    - text: "Token de administraci√≥n actual: {user_token}"
  

actions:
  - action_estado_estudiante
  - action_tutor_asignado
  - action_listar_certificados
  - action_ver_certificados
  - action_ingreso_zajuna
  - action_recuperar_contrasena
  - zajuna_get_certificados
  - zajuna_get_estado_estudiante
  - action_reiniciar_conversacion
  - action_mostrar_token
  - action_ping_servidor
  - action_enviar_soporte
  - action_derivar_y_registrar_humano
  - action_conectar_humano
  - action_preguntar_resolucion
  - action_set_authenticated_true
  - action_check_auth
  - action_enviar_correo_recuperacion
  - action_confirmar_cierre
  - action_finalizar_conversacion
  - action_cancelar_cierre
  - action_ofrecer_humano
  - action_handoff_cancelar
  - action_auto_resume
  - action_reanudar_auto
  - action_confirmar_cierre_seguro
  - action_autosave_encuesta
  - action_guardar_autosave_mongo
  - action_cargar_autosave_mongo
  - action_autoresume_conversacion
  - action_reset_conversacion_segura
  - action_registrar_encuesta
  - action_guardar_feedback
  - action_ofrecer_continuar_tema
  - action_set_encuesta_tipo
  - validate_encuesta_satisfaccion_form
  - action_health_check
  - action_autosave_snapshot
  - action_registrar_intento_form
  - action_verificar_max_intentos_form
  - action_derivar_humano_confirmada
  - action_cancelar_derivacion
  - action_soporte_submit
  - action_set_menu_principal
  - action_ver_estado_estudiante
  - action_consultar_certificados
  - action_verificar_estado_encuesta
  - action_guardar_progreso_encuesta
  - action_terminar_conversacion_segura
  - action_ir_menu_principal
  - action_mostrar_menu_principal_quick
  - action_mostrar_certificados_carousel
  - action_mostrar_login_hint_presentacion
  - action_guardian_guardar_progreso
  - action_guardian_cargar_progreso
  - action_guardian_pausar
  - action_guardian_reanudar
  - action_guardian_reset
  - action_notificar_desconexion
  - action_notificar_inactividad
  - action_notificar_reconexion
  - action_guardar_estado_seguridad
  - action_recuperar_estado_seguridad
  - validate_soporte_form
  - action_enviar_correo_tutor
  - action_verificar_proceso_activo_autosave
  - action_guardar_encuesta_incompleta
  - action_confirmar_cierre_autosave
  - action_cancelar_cierre_autosave
  - action_escalar_a_humano
  - action_verificar_proceso_activo
  - action_enviar_correo
  - action_cancelar_cierre_segura
  - action_enviar_soporte_directo
  - action_iniciar_soporte
  - action_set_default_tipo_usuario
  - action_ir_menu_principal 