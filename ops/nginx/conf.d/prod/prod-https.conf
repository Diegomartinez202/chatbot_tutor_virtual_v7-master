# ==========================================================
# üîÅ Upstreams usados por locations.inc (y/o otros vhosts)
# ==========================================================
upstream admin_up {
  server admin:80;
}

upstream backend_upstream {
  server backend:8000;
  keepalive 32;
}

upstream rasa_upstream {
  server rasa:5005;
  keepalive 16;
}

# ==========================================================
# üåê SERVIDOR HTTPS PRINCIPAL
# ==========================================================
server {
  listen 443 ssl http2;
  server_name _;

  ssl_certificate     /etc/nginx/certs/fullchain.pem;
  ssl_certificate_key /etc/nginx/certs/privkey.pem;

  # Par√°metros TLS endurecidos
  include /etc/nginx/conf.d/prod/includes/tls_params.conf;

  # Ra√≠z SPA (mismo que default.conf)
  root  /usr/share/nginx/html;
  index index.html;

  # Inyectamos TODOS los locations comunes
  include /etc/nginx/conf.d/common/includes/locations.inc;
}